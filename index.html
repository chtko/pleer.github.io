<!DOCTYPE html>
<html>
<head>
    <title>Музыкальный плеер</title>
    <style>
        body {
            background-color: white; /* Белый фон */
        }

        /* Стили для области перетаскивания файла */
        #dropArea {
            border: 2px dashed #fff;
            width: 100%;
            height: 100vh;
            padding: 20px;
            text-align: center;
            background-color: white; /* Белый фон по умолчанию */
        }

        /* Медиа-запрос для экранов шире 600px */
        @media (min-width: 600px) {
            #dropArea {
                padding: 40px; /* Увеличьте отступы на более широких экранах */
            }
        }
    </style>
</head>
<body>
    <h1>Музыкальный плеер</h1>
    
    <audio id="audio" controls>
        <source src="" type="audio/mp3">
        <source src="" type="audio/ogg">
        <source src="" type="audio/wav">
        <source src="" type="audio/mp4">
        <source src="" type="audio/x-m4a">
    </audio>

    <script>
        const audio = document.getElementById('audio');
        audio.volume = 0.25; // Устанавливаем начальную громкость в 25%
    </script>

    <div>
        <input type="file" accept=".mp3,.ogg,.wav,.mp4,.m4a" id="audioFile" style="display: none">
        <button onclick="document.getElementById('audioFile').click()">Загрузить музыку</button>
    </div>
    
    <div>
        <input type="url" id="audioURL" placeholder="Вставьте URL интернет радио">
        <button onclick="playAudioFromURL()">Воспроизвести музыку интернет радио по URL</button>
    </div>

    <!-- Добавляем обработчики событий для изменения фона зоны -->
    <div id="dropArea">
        <p>Перетащите файл с музыкой сюда, чтобы воспроизвести его в плеере</p>
    </div>
    
    <script>
        const audioFile = document.getElementById('audioFile');
        const audioURL = document.getElementById('audioURL');
        const dropArea = document.getElementById('dropArea');

        // Функция для воспроизведения музыки по URL
        function playAudioFromURL() {
            const audioURLValue = audioURL.value;
            audio.src = audioURLValue;
        }

        audioFile.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const objectURL = URL.createObjectURL(file);
                audio.src = objectURL;
            }
        });

        // Функция для обработки события перетаскивания файла
        function dropHandler(event) {
            event.preventDefault();
            dropArea.style.backgroundColor = 'lightblue'; // Изменяем цвет фона
            const file = event.dataTransfer.files[0];
            if (file) {
                const objectURL = URL.createObjectURL(file);
                audio.src = objectURL;
                audioFile.files = event.dataTransfer.files; // Вызываем событие change для input
                audioFile.dispatchEvent(new Event('change'));
            }
        }

        // Функция для обработки события "dragover" (перетаскивания над областью)
        function dragOverHandler(event) {
            event.preventDefault();
        }

        // Функция для возврата фона в исходное состояние
        function dragLeaveHandler(event) {
            dropArea.style.backgroundColor = 'white';
        }

        // Обработка событий dragenter и dragleave
        dropArea.addEventListener('dragenter', dropHandler);
        dropArea.addEventListener('dragleave', dragLeaveHandler);

        // Обработка попытки закрытия сайта
        window.addEventListener('beforeunload', function (e) {
            e.returnValue = 'Вы точно хотите закрыть сайт? Музыка перестанет играть, и плеер будет очищен, но файл останется на вашем ПК.';
        });
    </script>
</body>
</html>
